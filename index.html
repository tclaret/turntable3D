<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turntable 3D - stratching ! </title>
    <!-- Link to new external CSS file -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Inline styles that are critical or very specific could remain, but we moved everything -->
</head>

<body>

    <div class="interface-controls">
        <div class="controls-line">
            <button id="set33-btn" class="control-btn">SET 33 RPM</button>
            <button id="setstop-btn" class="control-btn active">SET STOP</button>
            <button id="set45-btn" class="control-btn">SET 45 RPM</button>
        </div>

        <div class="controls-line">
            <button id="direction-btn" class="control-btn">Direction (Reverse)</button>
            <div class="pitch-group">
                <label for="pitch-slider">Pitch (Vitesse):</label>
                <input type="range" id="pitch-slider" class="pitch-slider" min="0.5" max="1.5" step="0.01" value="1.0"
                    aria-label="Contrôle du pitch de la vitesse de lecture">
            </div>
            <!-- Debug button removed/hidden in refactor or kept? Original had it. Providing simpler UI -->
            <button id="toggle-debug" class="control-btn">Afficher Debug</button>
        </div>
    </div>

    <div class="scene">
        <div class="scene-inner">
            <div class="scene-base">
                <div class="scene-base-top"></div>
                <div class="scene-base-front"></div>
                <div class="scene-base-back"></div>
                <div class="scene-base-left"></div>
                <div class="scene-base-right"></div>
                <div class="scene-base-foot scene-base-foot1"></div>
                <div class="scene-base-foot scene-base-foot2"></div>
                <div class="scene-base-foot scene-base-foot3"></div>
                <div class="scene-base-foot scene-base-foot4"></div>
            </div>

            <!-- Debug Grids (Restored) -->
            <div class="debug-grid-xz">
                <div class="grid-label grid-label-xz">XZ Plane</div>
            </div>
            <div class="debug-grid-yz">
                <div class="grid-label grid-label-yz">YZ Plane</div>
            </div>
            <div class="debug-grid-xy">
                <div class="grid-label grid-label-xy">XY Plane</div>
            </div>

            <div class="debug-axis axis-x">
                <div class="axis-name" style="left: 100%; color: red;">X</div>
            </div>
            <div class="debug-axis axis-y">
                <div class="axis-name" style="top: -20px; color: green;">Y</div>
            </div>
            <div class="debug-axis axis-z">
                <div class="axis-name" style="right: -20px; color: blue;">Z</div>
            </div>

            <!-- Position Markers (kept for structure) -->
            <div class="position-marker"
                style="left: calc(50% - 10vmin); top: calc(50% + 10vmin); transform: translate(-50%, -50%) translateZ(8vmin);">
            </div>
            <div class="position-marker position-marker-blue"
                style="left: calc(50% + 10vmin); top: calc(50% - 10vmin); transform: translate(-50%, -50%) translateZ(0vmin);">
            </div>

            <div class="turntable-base">
                <div class="speed-selector-container">
                    <div class="speed-points-container">
                        <div class="speed-point speed-point-45" data-speed="45" data-label="45" title="45 RPM">
                            <div class="speed-drag-zone"></div>
                        </div>
                        <div class="speed-point speed-point-stop active" data-speed="stop" data-label="STOP"
                            title="STOP">
                            <div class="speed-drag-zone"></div>
                        </div>
                        <div class="speed-point speed-point-33" data-speed="33" data-label="33" title="33 RPM">
                            <div class="speed-drag-zone"></div>
                        </div>
                    </div>
                    <div class="selector-base">
                        <div id="speed-knob" class="selector-knob"></div>
                    </div>
                </div>

                <div class="pitch-control-container">
                    <div class="pitch-control-overlay"></div>
                    <div class="pitch-control-base">
                        <div id="pitch-knob" class="pitch-control-knob"></div>
                    </div>
                </div>

                <div class="tonearm-lift-fixed"></div>

                <div class="tonearm-rest"></div>
                <div id="tonearm-container" class="tonearm-container">
                    <div class="tonearm-gimbal-ring"></div>
                    <div class="tonearm-counterweight"></div>
                    <div class="tonearm-image">
                        <svg viewBox="-60 0 340 60" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="armGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#d0d0d0;stop-opacity:1" />
                                    <stop offset="40%" style="stop-color:#f0f0f0;stop-opacity:1" />
                                    <stop offset="60%" style="stop-color:#a0a0a0;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#707070;stop-opacity:1" />
                                </linearGradient>
                                <linearGradient id="armShine" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#fff;stop-opacity:0.4" />
                                    <stop offset="50%" style="stop-color:#fff;stop-opacity:0.1" />
                                    <stop offset="100%" style="stop-color:#fff;stop-opacity:0" />
                                </linearGradient>
                            </defs>
                            <path d="M -50,30 L 0,30 
                                     C 30,30 50,28 80,32 
                                     C 110,36 130,42 160,40 
                                     C 190,38 210,30 240,28 
                                     C 255,27 265,27 275,27
                                     L 275,33
                                     C 265,33 255,33 240,34
                                     C 210,36 190,44 160,46
                                     C 130,48 110,42 80,38
                                     C 50,34 30,36 0,36
                                     L -50,36 Z" fill="url(#armGradient)" stroke="#666" stroke-width="0.5" />
                            <ellipse cx="-40" cy="33" rx="10" ry="8" fill="#444" stroke="#222" stroke-width="0.5" />
                            <ellipse cx="-40" cy="33" rx="7" ry="6" fill="url(#armGradient)" />
                            <ellipse cx="-40" cy="31" rx="3" ry="2" fill="#999" opacity="0.6" />
                            <path d="M 5,29 C 35,29 55,30 85,34 C 115,38 135,43 165,41 C 195,39 215,31 245,29"
                                fill="none" stroke="url(#armShine)" stroke-width="3" opacity="0.5" />
                        </svg>
                        <div class="tonearm-headshell">
                            <div class="tonearm-headshell-screw"></div>
                            <div class="tonearm-headshell-screw"></div>
                            <div class="tonearm-lift-hook">
                                <div class="tonearm-drag-zone"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="record-container">
                <div class="platter"></div>
                <div class="vinyl-record"></div>

                <!-- Angle markers (Optional/Debug) -->
                <div class="angle-marker angle-marker-0" data-angle="0°"></div>
                <div class="angle-marker angle-marker-90" data-angle="90°"></div>
                <div class="angle-marker angle-marker-180" data-angle="180°"></div>
                <div class="angle-marker angle-marker-270" data-angle="270°"></div>
            </div>
        </div>
    </div>

    <!-- Starting Message -->
    <div id="starting-message" class="starting-message">Starting</div>

    <!-- Scratch Overlay (kept for compatibility) -->
    <div id="speed-overlay" class="speed-overlay">
        <div class="speed-selector-panel">
            <h3>Sélectionner la vitesse</h3>
            <button class="speed-option" data-speed="33">33 RPM</button>
            <button class="speed-option selected" data-speed="0">STOP</button>
            <button class="speed-option" data-speed="45">45 RPM</button>
        </div>
    </div>

    <!-- Scratch Indicator (Optional/Debug) -->
    <div id="scratch-indicator" class="scratch-indicator">
        <span class="speed-value">×1.0</span>
    </div>

    <!-- Charger Tone.js depuis CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <!-- Link to new external JS file -->
    <script src="js/app.js"></script>
</body>

</html>